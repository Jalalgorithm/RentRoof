@page "/property-add"
@using RentHome.Client.Services.ModeServices

@inject IModeService modeService
@inject IHouseService houseService
@inject NavigationManager navigationManager


<div class="container-lg mt-2">
    <div class="text-center">
        <h2>Add Property</h2>
        <p class="lead">Add your home for rent , sale or lease.......</p>
    </div>
    
</div>

<div class="row justify-content-center my-5">

    <div class="col-lg-6">
        <EditForm Model="@houseRequestDTO" OnValidSubmit="AddNewProperty" OnInvalidSubmit="Failed">
                <label for="Name" class="col-sm-2 col-form-label">Name</label>
            <div class="input-group mb-3">
                <span class="input-group-text">
                    <i class="bi bi-house-add-fill"></i>
                </span>
                <InputText id="title" @bind-Value="houseRequestDTO.Name" class="form-control" placeholder="Name of property" />
            </div>

            <label for="Location" class="form-label">Location</label>
            <div class="input-group  mb-3">
                <span class="input-group-text">
                    <i class="bi bi-geo-alt-fill"></i>
                </span>
                <InputText id="Location" @bind-Value="houseRequestDTO.Location" class="form-control" placeholder="Location of property" />
            </div>


            <label for="Type" class="form-label">Type</label>
            <div class="input-group mb-3">
                <span class="input-group-text">
                    <i class="bi bi-blockquote-right"></i>
                </span>
                <InputText id="Type" @bind-Value="houseRequestDTO.Type" class="form-control" placeholder="Type of property" />
            </div>


            <label for="image" class="form-label">Image</label>
            <div class="input-group mb-3">
                <span class="input-group-text">
                    <i class="bi bi-card-image"></i>
                </span>
                <InputText id="Image" @bind-Value="houseRequestDTO.Image" class="form-control" placeholder="Image Url of property" />
            </div>

            <label for="Size" class="form-label">Size</label>
            <div class="input-group mb-3">
                <span class="input-group-text">
                    <i class="bi bi-arrows-angle-expand"></i>
                </span>
                <InputNumber id="Size" @bind-Value="houseRequestDTO.Size" class="form-control" placeholder="Size of property" />
            </div>

            <div class="mb-3">
                <label for="NumberOfBathroom" class="form-label">Bathroom</label>
                <InputNumber id="NumberOfBathroom" @bind-Value="houseRequestDTO.NumberOfBathroom" class="form-control" placeholder="Enter a number" />
            </div>
            <div class="mb-3">
                <label for="NumberOfBedroom" class="form-label">Bedroom</label>
                <InputNumber id="NumberOfBedroom" @bind-Value="houseRequestDTO.NumberOfBedroom" class="form-control" placeholder="Enter a number" />
            </div>

            <label for="Price" class="form-label">Price</label>
            <div class="input-group mb-3">
                <span class="input-group-text">
                    <i class="bi bi-tags-fill"></i>
                </span>
                <InputNumber id="Price" @bind-Value="houseRequestDTO.Price" class="form-control" placeholder="Price of Proerty" />
            </div>

            <label for="Propert Mode" class="form-label">Mode</label>
            <div class="input-group mb-3">
                <span class="input-group-text">
                    <i class="bi bi-receipt"></i>
                </span>
                <InputSelect id="mode" @bind-Value="houseRequestDTO.ModeId" class="form-select">
                    <option selected>Open this select menu</option>
                    @foreach (var mode in modeResponses)
                    {
                        <option value="@mode.Id">@mode.Name</option>
                    }

                </InputSelect>
            </div>
            <button type="submit" class="btn btn-primary"> Add Property </button>

        </EditForm>

    </div>
</div>






@code {
    HouseRequestDTO houseRequestDTO = new HouseRequestDTO();
    List<ModeResponseDTO> modeResponses = new();

    protected async override Task OnInitializedAsync()
    {
        await GetData();
    }

    public async Task AddNewProperty()
    {
        await houseService.AddHouseData(houseRequestDTO);
    }
    private async Task GetData()
    {
        modeResponses= await modeService.GetAllMode();
    }

    public void Failed()
    {
        Console.WriteLine("Failed!");
    }

}
